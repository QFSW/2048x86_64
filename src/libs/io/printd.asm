PUBLIC printd
EXTERN putchar:PROC

ASCII_0 EQU 48

.code
; RCX = num
printd PROC
	PUSH R12
	PUSH R13
	PUSH R14
	ENTER 32, 0
	MOV R14, 0
	MOV R13, RCX
	MOV R12, 0

fliploop:
	MOV RAX, R13
	MOV RCX, 10
	MOV RDX, 0
	DIV RCX
	MOV R13, RAX
	MOV R8, RDX
	MOV RAX, R12
	MUL RCX
	MOV R12, RAX
	ADD R12, R8
	INC R14
	CMP R13, 0
	JNE fliploop

printloop:
	MOV RAX, R12
	MOV RCX, 10
	MOV RDX, 0
	DIV RCX
	MOV R12, RAX
	MOV RCX, RDX
	ADD RCX, ASCII_0
	CALL putchar
	DEC R14
	CMP R14, 0
	JNE printloop

	LEAVE
	POP R14
	POP R13
	POP R12
	RET
printd ENDP

END